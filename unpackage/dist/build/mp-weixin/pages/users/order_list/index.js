(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/order_list/index"],{"0e39":function(t,e,i){},"436d":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var o=function(){var t=this,e=t.$createElement,i=(t._self._c,t.orderData.sumPrice?Number(t.orderData.sumPrice).toFixed(2):null);t.$mp.data=Object.assign({},{$root:{g0:i}})},r=[]},"4b70":function(t,e,i){"use strict";(function(t){i("f524");n(i("66fd"));var e=n(i("8349"));function n(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},6913:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("fa41"),o=(i("be59"),i("8a48")),r=i("26cb"),a=i("5fb7");s(i("37f7"));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){i.e("components/home/index").then(function(){return resolve(i("40e3"))}.bind(null,i)).catch(i.oe)},c=function(){Promise.all([i.e("common/vendor"),i.e("components/payment/index")]).then(function(){return resolve(i("8dd3"))}.bind(null,i)).catch(i.oe)},d=function(){i.e("components/emptyPage").then(function(){return resolve(i("505e"))}.bind(null,i)).catch(i.oe)},l=getApp(),f={components:{payment:c,home:u,emptyPage:d},data:function(){return{loading:!1,loadend:!1,loadTitle:"加载更多",orderList:[],orderData:{},orderStatus:0,page:1,limit:20,payMode:[{name:"微信支付",icon:"icon-weixinzhifu",value:"weixin",title:"微信快捷支付",payStatus:1},{name:"余额支付",icon:"icon-yuezhifu",value:"yue",title:"可用余额:",number:0,payStatus:1}],pay_close:!1,pay_order_id:"",totalPrice:"0",isShow:!1,isAuto:!1,isShowAuth:!1,theme:l.globalData.theme,bgColor:"#e93323"}},computed:(0,r.mapGetters)(["isLogin","userInfo"]),onShow:function(){var e=this;e.bgColor=(0,a.setThemeColor)(),t.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:e.bgColor}),this.isLogin?(this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.getOrderData(),this.getOrderList(),this.payMode[1].number=this.userInfo.nowMoney,this.$set(this,"payMode",this.payMode)):(0,o.toLogin)()},methods:{onLoadFun:function(){this.getOrderData(),this.getOrderList()},authColse:function(t){this.isShowAuth=t},onChangeFun:function(t){var e=t,i=e.action||null,n=void 0!=e.value?e.value:null;i&&this[i]&&this[i](n)},payClose:function(){this.pay_close=!1},onLoad:function(t){t.status&&(this.orderStatus=t.status)},getOrderData:function(){var t=this;(0,n.orderData)().then((function(e){t.$set(t,"orderData",e.data)}))},cancelOrder:function(e,i){var o=this;if(!i)return o.$util.Tips({title:"缺少订单号无法取消订单"});t.showModal({content:"确定取消该订单",cancelText:"取消",confirmText:"确定",showCancel:!0,confirmColor:"#f55850",success:function(r){r.confirm&&(t.showLoading({title:"正在取消中"}),(0,n.orderCancel)(i).then((function(i){return t.hideLoading(),o.$util.Tips({title:"取消成功",icon:"success"},(function(){o.orderList.splice(e,1),o.$set(o,"orderList",o.orderList),o.$set(o.orderData,"unpaid_count",o.orderData.unpaid_count-1),o.getOrderData()}))})).catch((function(t){return o.$util.Tips({title:t})})))}})},goPay:function(t,e){this.$set(this,"pay_close",!0),this.$set(this,"pay_order_id",e),this.$set(this,"totalPrice",t)},pay_complete:function(){this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.$set(this,"pay_close",!1),this.getOrderData(),this.getOrderList()},pay_fail:function(){this.pay_close=!1},goOrderDetails:function(e,i){if(!e)return that.$util.Tips({title:"缺少订单号无法查看订单详情"});t.navigateTo({url:"/pages/order_details/index?order_id="+e})},statusClick:function(t){t!=this.orderStatus&&(this.orderStatus=t,this.loadend=!1,this.page=1,this.$set(this,"orderList",[]),this.getOrderList())},getOrderList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle="加载更多",(0,n.getOrderList)({type:t.orderStatus,page:t.page,limit:t.limit}).then((function(e){var i=e.data.list||[],n=i.length<t.limit;t.orderList=t.$util.SplitArray(i,t.orderList),t.$set(t,"orderList",t.orderList),t.loadend=n,t.loading=!1,t.loadTitle=n?"我也是有底线的":"加载更多",t.page=t.page+1,t.isShow=!0})).catch((function(e){t.loading=!1,t.loadTitle="加载更多"})))},delOrder:function(e,i){var o=this;t.showModal({content:"确定删除该订单",cancelText:"取消",confirmText:"确定",showCancel:!0,confirmColor:"#f55850",success:function(t){if(t.confirm){var r=o;(0,n.orderDel)(e).then((function(t){return r.orderList.splice(i,1),r.$set(r,"orderList",r.orderList),r.$set(r.orderData,"unpaid_count",r.orderData.unpaid_count-1),r.getOrderData(),r.$util.Tips({title:"删除成功",icon:"success"})})).catch((function(t){return r.$util.Tips({title:t})}))}}})}},onReachBottom:function(){this.getOrderList()}};e.default=f}).call(this,i("543d")["default"])},"6edc":function(t,e,i){"use strict";var n=i("0e39"),o=i.n(n);o.a},"74b6":function(t,e,i){"use strict";i.r(e);var n=i("6913"),o=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=o.a},8349:function(t,e,i){"use strict";i.r(e);var n=i("436d"),o=i("74b6");for(var r in o)"default"!==r&&function(t){i.d(e,t,(function(){return o[t]}))}(r);i("6edc");var a,s=i("f0c5"),u=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"fa4d4d8a",null,!1,n["a"],a);e["default"]=u.exports}},[["4b70","common/runtime","common/vendor"]]]);
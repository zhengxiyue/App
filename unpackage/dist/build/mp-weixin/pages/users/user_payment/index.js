(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_payment/index"],{"14df":function(e,t,i){},4280:function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,i=(e._self._c,e.active?null:parseFloat(e.activePic)),n=e.active?null:parseFloat(e.picList.length),a=e.active?null:parseFloat(e.activePic),r=e.active?null:parseFloat(e.picList.length);e.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:a,m3:r}})},r=[]},"5dc4":function(e,t,i){"use strict";(function(e){i("f524");n(i("66fd"));var t=n(i("7ac8"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i("543d")["createPage"])},"7ac8":function(e,t,i){"use strict";i.r(t);var n=i("4280"),a=i("d462");for(var r in a)"default"!==r&&function(e){i.d(t,e,(function(){return a[e]}))}(r);i("f7df");var c,o=i("f0c5"),u=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);t["default"]=u.exports},d462:function(e,t,i){"use strict";i.r(t);var n=i("f189"),a=i.n(n);for(var r in n)"default"!==r&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=a.a},f189:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("cc12"),a=i("fa41"),r=i("8a48"),c=i("26cb"),o=i("1e98"),u=function(){Promise.all([i.e("common/vendor"),i.e("components/Authorize")]).then(function(){return resolve(i("5da7"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/home/index").then(function(){return resolve(i("40e3"))}.bind(null,i)).catch(i.oe)},l=getApp(),f={components:{authorize:u,home:s},data:function(){return{now_money:0,navRecharge:["账户充值","佣金转入"],active:0,number:"",placeholder:"0.00",from:"",isAuto:!1,isShowAuth:!1,picList:[],activePic:0,money:"",numberPic:"",rechar_id:0,rechargeAttention:[],theme:l.globalData.theme,cartArr:[{name:"微信支付",icon:"icon-weixin2",value:"weixin",title:"微信快捷支付",payStatus:1}],payType:"weixin",openType:1,curActive:0,animated:!1,formContent:""}},computed:(0,c.mapGetters)(["isLogin","systemPlatform","userInfo"]),watch:{isLogin:{handler:function(e,t){e&&this.getRecharge()},deep:!0}},onLoad:function(e){this.isLogin?(this.getRecharge(),this.payConfig()):(0,r.toLogin)()},methods:{picCharge:function(e,t){this.activePic=e,void 0===t?(this.rechar_id=0,this.numberPic=""):(this.money="",this.rechar_id=t.id,this.numberPic=t.price)},getRecharge:function(){var e=this;(0,n.getRechargeApi)().then((function(t){e.picList=t.data.rechargeQuota,e.picList[0]&&(e.rechar_id=e.picList[0].id,e.numberPic=e.picList[0].price),e.rechargeAttention=t.data.rechargeAttention||[]})).catch((function(t){e.$dialog.toast({mes:t})}))},payConfig:function(){var e=this;(0,a.getPayConfig)().then((function(t){e.cartArr[0].payStatus=1===parseInt(t.data.payWeixinOpen)?1:0}))},onLoadFun:function(){this.getRecharge()},authColse:function(e){this.isShowAuth=e},navRecharges:function(e){this.active=e},payItem:function(e){var t=this,i=e;t.curActive=i,t.animated=!0,t.payType=t.cartArr[i].value},submitSub:(0,o.Debounce)((function(t){var i=this,a=t.detail.value.number?t.detail.value.number:i.numberPic;if(i.active){if(parseFloat(a)<0||NaN==parseFloat(a)||void 0==a||""==a)return i.$util.Tips({title:"请输入金额"});e.showModal({title:"转入余额",content:"转入余额后无法再次转出，确认是否转入余额",success:function(e){if(e.confirm)(0,n.transferIn)({price:parseFloat(a)}).then((function(e){return i.$store.commit("changInfo",{amount1:"brokeragePrice",amount2:i.$util.$h.Sub(i.userInfo.brokeragePrice,parseFloat(a))}),i.$util.Tips({title:"转入成功",icon:"success"},{tab:5,url:"/pages/users/user_money/index"})})).catch((function(e){return i.$util.Tips({title:e})}));else if(e.cancel)return i.$util.Tips({title:"已取消"})}})}else{e.showLoading({title:"正在支付"});var r=parseFloat(this.money);if(0==this.rechar_id){if(Number.isNaN(r))return i.$util.Tips({title:"充值金额必须为数字"});if(r<=0)return i.$util.Tips({title:"充值金额不能为0"});if(r>5e4)return i.$util.Tips({title:"充值金额最大值为50000"})}else r=this.numberPic;switch(i.payType){case"weixin":(0,n.rechargeRoutine)({price:r,type:0,rechar_id:this.rechar_id}).then((function(t){e.hideLoading();var n=t.data.data.jsConfig;e.requestPayment({timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.packages,signType:n.signType,paySign:n.paySign,success:function(e){return i.$store.commit("changInfo",{amount1:"nowMoney",amount2:i.$util.$h.Add(a,i.userInfo.nowMoney)}),i.$util.Tips({title:"支付成功",icon:"success"},{tab:5,url:"/pages/users/user_money/index"})},fail:function(e){return i.$util.Tips({title:"支付失败"})},complete:function(e){if("requestPayment:cancel"==e.errMsg)return i.$util.Tips({title:"取消支付"})}})})).catch((function(t){return e.hideLoading(),i.$util.Tips({title:t})}));break;case"alipay":break}}})),addMoney:function(){this.money=this.money.replace(/[^\d]/g,"").replace(/^0{1,}/g,"")}}};t.default=f}).call(this,i("543d")["default"])},f7df:function(e,t,i){"use strict";var n=i("14df"),a=i.n(n);a.a}},[["5dc4","common/runtime","common/vendor"]]]);
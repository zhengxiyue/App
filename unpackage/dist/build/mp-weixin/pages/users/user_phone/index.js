(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/user_phone/index"],{"87ed":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("a34a")),r=c(n("5975")),u=n("a30d"),s=n("8a48"),o=n("26cb"),a=n("5fb7");function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e,n,i,r,u,s){try{var o=t[u](s),a=o.value}catch(c){return void n(c)}o.done?e(a):Promise.resolve(a).then(i,r)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var u=t.apply(e,n);function s(t){f(u,i,r,s,o,"next",t)}function o(t){f(u,i,r,s,o,"throw",t)}s(void 0)}))}}var d=getApp(),h={mixins:[r.default],data:function(){return{phone:"",captcha:"",isAuto:!1,isShowAuth:!1,key:"",isNew:!0,timer:"",text:"获取验证码",nums:60,theme:d.globalData.theme,bgColor:""}},mounted:function(){},computed:(0,o.mapGetters)(["isLogin","userInfo"]),onLoad:function(){var e=this;e.bgColor=(0,a.setThemeColor)(),t.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:e.bgColor}),this.isLogin||(0,s.toLogin)()},methods:{getTimes:function(){this.nums=this.nums-1,this.text="剩余 "+this.nums+"s",this.nums<0&&clearInterval(this.timer),this.text="剩余 "+this.nums+"s",this.text<"剩余 0s"&&(this.disabled=!1,this.text="重新获取")},onLoadFun:function(){},authColse:function(t){this.isShowAuth=t},next:function(){var t=this;if(!this.captcha)return this.$util.Tips({title:"请填写验证码"});(0,u.bindingVerify)({phone:this.userInfo.phone,captcha:this.captcha}).then((function(e){t.isNew=!1,t.captcha="",clearInterval(t.timer),t.disabled=!1,t.text="获取验证码"})).catch((function(e){return t.$util.Tips({title:e})}))},editPwd:function(){var e=this;return e.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.phone)?e.captcha?void t.showModal({title:"是否更换绑定账号",confirmText:"绑定",success:function(t){if(t.confirm)(0,u.bindingPhone)({phone:e.phone,captcha:e.captcha}).then((function(t){return e.$util.Tips({title:t.message,icon:"success"},{tab:5,url:"/pages/users/user_info/index"})})).catch((function(t){return e.$util.Tips({title:t})}));else if(t.cancel)return e.$util.Tips({title:"您已取消更换绑定！"},{tab:5,url:"/pages/users/user_info/index"})}}):e.$util.Tips({title:"请填写验证码"}):e.$util.Tips({title:"请输入正确的手机号码！"}):e.$util.Tips({title:"请填写手机号码！"})},code:function(){var e=this;return l(i.default.mark((function n(){var r;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.nums=60,t.showLoading({title:"加载中",mask:!0}),r=e,r.isNew){n.next=8;break}if(r.phone){n.next=6;break}return n.abrupt("return",r.$util.Tips({title:"请填写手机号码！"}));case 6:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(r.phone)){n.next=8;break}return n.abrupt("return",r.$util.Tips({title:"请输入正确的手机号码！"}));case 8:return n.next=10,(0,u.registerVerify)(r.isNew?r.userInfo.phone:r.phone).then((function(e){r.$util.Tips({title:e.message}),r.timer=setInterval(r.getTimes,1e3),r.disabled=!0,t.hideLoading()})).catch((function(t){return r.$util.Tips({title:t})}));case 10:case"end":return n.stop()}}),n)})))()}}};e.default=h}).call(this,n("543d")["default"])},a626:function(t,e,n){},ade9:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return i}));var r=function(){var t=this,e=t.$createElement;t._self._c},u=[]},b1bd:function(t,e,n){"use strict";var i=n("a626"),r=n.n(i);r.a},b8fd:function(t,e,n){"use strict";n.r(e);var i=n("ade9"),r=n("d44d");for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);n("b1bd");var s,o=n("f0c5"),a=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,"63884ea0",null,!1,i["a"],s);e["default"]=a.exports},d44d:function(t,e,n){"use strict";n.r(e);var i=n("87ed"),r=n.n(i);for(var u in i)"default"!==u&&function(t){n.d(e,t,(function(){return i[t]}))}(u);e["default"]=r.a},e54f:function(t,e,n){"use strict";(function(t){n("f524");i(n("66fd"));var e=i(n("b8fd"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])}},[["e54f","common/runtime","common/vendor"]]]);
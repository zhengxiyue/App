(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order_pay_status/index"],{"0e76":function(t,e,n){"use strict";(function(t){n("f524");i(n("66fd"));var e=i(n("3f77"));function i(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},"3f77":function(t,e,n){"use strict";n.r(e);var i=n("bc72"),a=n("7e47");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("bce7");var r,d=n("f0c5"),u=Object(d["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=u.exports},"7e47":function(t,e,n){"use strict";n.r(e);var i=n("7fbe"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"7fbe":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n("fa41"),a=n("be59"),o=n("8a48"),r=n("26cb"),d=function(){Promise.all([n.e("common/vendor"),n.e("components/Authorize")]).then(function(){return resolve(n("5da7"))}.bind(null,n)).catch(n.oe)},u=getApp(),c={components:{authorize:d},data:function(){return{orderId:"",order_pay_info:{paid:!0,_status:{}},isAuto:!1,isShowAuth:!1,status:0,msg:"",theme:u.globalData.theme}},computed:(0,r.mapGetters)(["isLogin"]),watch:{isLogin:{handler:function(t,e){t&&this.getOrderPayInfo()},deep:!0}},onLoad:function(t){if(!t.order_id)return this.$util.Tips({title:"缺少参数无法查看订单支付状态"},{tab:3,url:1});this.orderId=t.order_id,this.status=t.status||0,this.msg=t.msg||"",this.isLogin?this.getOrderPayInfo():(0,o.toLogin)()},methods:{wechatQueryPay:function(){var e=this;(0,i.wechatQueryPayResult)(this.orderId).then((function(n){e.order_pay_info.paid=!0,t.setNavigationBarTitle({title:e.order_pay_info.paid?"支付成功":"支付失败"}),t.hideLoading()})).catch((function(n){return e.order_pay_info.paid=!1,t.hideLoading(),e.$util.Tips({title:n})}))},onLoadFun:function(){this.getOrderPayInfo()},getOrderPayInfo:function(){var e=this;t.showLoading({title:"正在加载中"}),(0,i.getOrderDetail)(e.orderId).then((function(n){e.$set(e,"order_pay_info",n.data),"weixin"!==n.data.payType||e.$wechat.isWeixin()||!1!==n.data.paid?(t.setNavigationBarTitle({title:n.data.paid?"支付成功":"未支付"}),t.hideLoading()):setTimeout((function(){e.wechatQueryPay()}),2e3)})).catch((function(e){t.hideLoading()}))},goIndex:function(e){t.switchTab({url:"/pages/index/index"})},goPink:function(e){t.navigateTo({url:"/pages/activity/goods_combination_status/index?id="+e})},goOrderDetails:function(e){var n=this;t.showLoading({title:"正在加载"}),(0,a.openOrderSubscribe)().then((function(e){t.hideLoading(),t.navigateTo({url:"/pages/order_details/index?order_id="+n.orderId})})).catch((function(){t.hideLoading()}))}}};e.default=c}).call(this,n("543d")["default"])},a9b8:function(t,e,n){},bc72:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement;t._self._c},o=[]},bce7:function(t,e,n){"use strict";var i=n("a9b8"),a=n.n(i);a.a}},[["0e76","common/runtime","common/vendor"]]]);
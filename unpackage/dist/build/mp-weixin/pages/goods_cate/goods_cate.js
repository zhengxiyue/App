(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods_cate/goods_cate"],{"05dc":function(t,e,i){"use strict";i.r(e);var r=i("1db1"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},"068a":function(t,e,i){"use strict";i.r(e);var r=i("616a"),a=i("05dc");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("f326");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=o.exports},"0b74":function(t,e,i){"use strict";(function(t){i("f524");r(i("66fd"));var e=r(i("3486"));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=i,t(e.default)}).call(this,i("543d")["createPage"])},"0f36":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"d_goodList",props:{dataConfig:{type:Object,default:function(){}},tempArr:{type:Array,default:[]},isLogin:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},mounted:function(){},methods:{goDetail:function(t){this.$emit("detail",t)},goCartDuo:function(t){this.$emit("gocartduo",t)},goCartDan:function(t,e){this.$emit("gocartdan",t,e)},CartNumDes:function(t,e){this.$emit("ChangeCartNumDan",!1,t,e)},CartNumAdd:function(t,e){this.$emit("ChangeCartNumDan",!0,t,e)}}};e.default=r},1242:function(t,e,i){"use strict";i.r(e);var r=i("1df7"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},"1db1":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i("b07f"),a=i("fa41"),n=d(i("fba4")),s=i("26cb"),c=i("52a6"),o=i("8a48"),u=d(i("37f7"));function d(t){return t&&t.__esModule?t:{default:t}}var l=function(){i.e("components/productWindow/index").then(function(){return resolve(i("3076"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/cartList/index").then(function(){return resolve(i("070d"))}.bind(null,i)).catch(i.oe)},f=function(){i.e("components/home/index").then(function(){return resolve(i("40e3"))}.bind(null,i)).catch(i.oe)},p={computed:(0,s.mapGetters)(["isLogin","uid"]),components:{productWindow:l,goodList:n.default,cartList:h,home:f},props:{showSlide:{type:Boolean,default:!0}},data:function(){return{productList:[],navActive:0,categoryTitle:"",categoryErList:[],tabLeft:0,isWidth:0,tabClick:0,iSlong:!0,tempArr:[],loading:!1,loadend:!1,loadTitle:"Âä†ËΩΩÊõ¥Â§ö",page:1,limit:10,cid:0,sid:0,isAuto:!1,isShowAuth:!1,attr:{cartAttr:!1,productAttr:[],productSelect:{}},productValue:[],attrValue:"",storeName:"",id:0,cartData:{cartList:[],iScart:!1},cartCount:0,totalPrice:0,lengthCart:0,theme:"theme1"}},created:function(){this.isLogin&&(this.getCartNum(),this.getCartLists(1)),this.getAllCategory();var e=this;e.lengthCart=e.cartData.cartList,t.getSystemInfo({success:function(t){e.isWidth=t.windowWidth/5}})},methods:{subOrder:function(){var t=this,e=t.cartData.cartList;if(!e.length)return t.$util.Tips({title:"ËØ∑ÈÄâÊã©‰∫ßÂìÅ"});var i=e.map((function(t){return{shoppingCartId:Number(t.id)}}));this.$Order.getPreOrder("shoppingCart",i),t.cartData.iScart=!1},getTotalPrice:function(){var t=this,e=t.cartData.cartList,i=0;e.forEach((function(e){e.attrStatus&&(i=t.$util.$h.Add(i,t.$util.$h.Mul(e.cartNum,e.vipPrice?e.vipPrice:e.price)))})),t.$set(t,"totalPrice",i)},ChangeSubDel:function(t){var e=this,i=e.cartData.cartList,r=[];i.forEach((function(t){r.push(t.id)})),(0,a.cartDel)(r.join(",")).then((function(t){e.$set(e.cartData,"cartList",[]),e.cartData.iScart=!1,e.totalPrice=0,e.page=1,e.loadend=!1,e.tempArr=[],e.productslist(),e.getCartNum()}))},ChangeOneDel:function(t,e){var i=this,r=i.cartData.cartList;(0,a.cartDel)(t.toString()).then((function(t){r.splice(e,1),r.length||(i.cartData.iScart=!1,i.page=1,i.loadend=!1,i.tempArr=[],i.productslist()),i.getCartNum()}))},getCartLists:function(t){var e=this,i={page:1,limit:e.cartCount,isValid:!0};(0,a.getCartList)(i).then((function(i){e.$set(e.cartData,"cartList",i.data.list),i.data.list.length?e.$set(e.cartData,"iScart",!t&&!e.cartData.iScart):e.$set(e.cartData,"iScart",!1),e.getTotalPrice()}))},closeList:function(t){this.$set(this.cartData,"iScart",t),this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},getCartNum:function(){var t=this;(0,a.getCartCounts)(!0,"sum").then((function(e){t.$set(t,"cartCount",e.data.count)}))},onMyEvent:function(){this.$set(this.attr,"cartAttr",!1)},DefaultSelect:function(){var t=this.attr.productAttr,e=[];for(var i in this.productValue)if(this.productValue[i].stock>0){e=this.attr.productAttr.length?i.split(","):[];break}for(var r=0;r<t.length;r++)this.$set(t[r],"index",e[r]);var a=this.productValue[e.join(",")];a&&t.length?(this.$set(this.attr.productSelect,"storeName",this.storeName),this.$set(this.attr.productSelect,"image",a.image),this.$set(this.attr.productSelect,"price",a.price),this.$set(this.attr.productSelect,"stock",a.stock),this.$set(this.attr.productSelect,"unique",a.id),this.$set(this.attr.productSelect,"vipPrice",a.vipPrice),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"attrValue",e.join(","))):!a&&t.length?(this.$set(this.attr.productSelect,"storeName",this.storeName),this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",0),this.$set(this.attr.productSelect,"unique",""),this.$set(this.attr.productSelect,"cart_num",0),this.$set(this,"attrValue","")):a||t.length||(this.$set(this.attr.productSelect,"storeName",this.storeName),this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",this.storeInfo.stock),this.$set(this.attr.productSelect,"unique",this.storeInfo.unique||""),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"attrValue",""))},ChangeAttr:function(t){var e=this.productValue[t];e?(this.$set(this.attr.productSelect,"image",e.image),this.$set(this.attr.productSelect,"price",e.price),this.$set(this.attr.productSelect,"stock",e.stock),this.$set(this.attr.productSelect,"unique",e.id),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vipPrice",e.vipPrice),this.$set(this,"attrValue",t)):(this.$set(this.attr.productSelect,"image",this.productInfo.image),this.$set(this.attr.productSelect,"price",this.productInfo.price),this.$set(this.attr.productSelect,"stock",0),this.$set(this.attr.productSelect,"unique",this.productInfo.id),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vipPrice",this.productInfo.vipPrice),this.$set(this,"attrValue",""))},attrVal:function(t){this.$set(this.attr.productAttr[t.indexw],"index",this.attr.productAttr[t.indexw].attrValues[t.indexn])},iptCartNum:function(t){this.$set(this.attr.productSelect,"cart_num",t)},onLoadFun:function(){},productslist:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle="",(0,r.getProductslist)({page:t.page,limit:t.limit,type:1,cid:t.sid}).then((function(e){var i=e.data.list,r=i.length<t.limit;t.tempArr=t.$util.SplitArray(i,t.tempArr),t.$set(t,"tempArr",t.tempArr),t.loading=!1,t.loadend=r,t.loadTitle=r?"üòï‰∫∫ÂÆ∂ÊòØÊúâÂ∫ïÁ∫øÁöÑ~~":"Âä†ËΩΩÊõ¥Â§ö",t.page=t.page+1})).catch((function(e){t.loading=!1,t.loadTitle="Âä†ËΩΩÊõ¥Â§ö"})))},ChangeCartNumDuo:function(t){var e=this.productValue[this.attrValue];if(void 0!==e||this.attr.productAttr.length||(e=this.attr.productSelect),void 0!==e){var i=e.stock||0,r=this.attr.productSelect;t?(r.cart_num++,r.cart_num>i&&(this.$set(this.attr.productSelect,"cart_num",i),this.$set(this,"cart_num",i))):(r.cart_num--,r.cart_num<1&&(this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"cart_num",1)))}},ChangeCartList:function(t,e){var i=this.cartData.cartList,r=i[e],a=i[e].stock;this.ChangeCartNum(t,r,a,0,r.productId,e,1),i.length||(this.cartData.iScart=!1,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist())},ChangeCartNum:function(t,e){var i=this;t?e.cartNum>=e.stock?e.cartNum=e.stock:(e.cartNum++,(0,a.changeCartNum)(e.id,e.cartNum).then((function(t){i.getCartNum(!0),i.getTotalPrice()}))):(e.cartNum--,(0,a.changeCartNum)(e.id,e.cartNum).then((function(t){i.getCartNum(!0),i.getTotalPrice()})),0==e.cartNum&&(0,a.cartDel)(e.id).then((function(t){i.getCartLists(1),i.getTotalPrice(),i.productslist(),i.getCartNum()})))},goCatNum:function(){this.goCat(1)},goCat:function(t){var e=this,i=e.productValue[this.attrValue];if(e.attrValue?e.attr.cartAttr=!e.isOpen:e.isOpen?e.attr.cartAttr=!0:e.attr.cartAttr=!e.attr.cartAttr,!0===e.attr.cartAttr&&!1===e.isOpen)return e.isOpen=!0;if(e.attr.productAttr.length&&0===i.stock&&!0===e.isOpen)return e.$util.Tips({title:"‰∫ßÂìÅÂ∫ìÂ≠ò‰∏çË∂≥ÔºåËØ∑ÈÄâÊã©ÂÖ∂ÂÆÉ"});if(1===t){var a={productId:parseFloat(e.id),cartNum:parseFloat(e.attr.productSelect.cart_num),isNew:!1,productAttrUnique:void 0!==e.attr.productSelect?e.attr.productSelect.unique:e.productInfo.id};(0,r.postCartAdd)(a).then((function(t){e.isOpen=!1,e.attr.cartAttr=!1,e.$util.Tips({title:"Ê∑ªÂä†Ë¥≠Áâ©ËΩ¶ÊàêÂäü",success:function(){setTimeout((function(){e.getCartNum(!0),e.getCartLists(1)}),100)}})})).catch((function(t){return e.isOpen=!1,e.$util.Tips({title:t})}))}else this.getPreOrder()},goCartDuo:function(e){this.isLogin?(t.showLoading({title:"Âä†ËΩΩ‰∏≠"}),this.storeName=e.storeName,this.getAttrs(e.id,e.storeName),this.$set(this,"id",e.id)):this.getIsLogin()},getIsLogin:function(){(0,o.toLogin)()},getAttrs:function(e){var i=this,a=this;(0,r.getAttr)(e).then((function(e){t.hideLoading(),a.$set(a.attr,"productAttr",e.data.productAttr),a.$set(a,"productValue",e.data.productValue);var r=a.attr.productAttr.map((function(t){return{attrName:t.attrName,attrValues:t.attrValues.split(","),id:t.id,isDel:t.isDel,productId:t.productId,type:t.type}}));i.$set(a.attr,"productAttr",r),i.$set(a.attr,"cartAttr",!0),a.DefaultSelect()}))},goDetail:function(e){this.isLogin?(0,c.goShopDetail)(e,this.uid).then((function(i){t.navigateTo({animationType:u.default.type,animationDuration:u.default.duration,url:"/pages/goods_details/index?id=".concat(e.id)})})):(0,o.toLogin)()},openTap:function(){this.iSlong=!1},closeTap:function(){this.iSlong=!0},getAllCategory:function(){var t=this;(0,r.getCategoryList)().then((function(e){e.data.forEach((function(t){t.child&&t.child.unshift({id:t.id,name:"ÂÖ®ÈÉ®"})}));var i=e.data;t.categoryTitle=i[0].name,t.sid=i[0].id,t.productList=i,t.categoryErList=e.data[0].child?e.data[0].child:[],t.page=1,t.loadend=!1,t.tempArr=[],t.productslist()}))},tapNav:function(t,e){var i=this.productList[t];this.navActive=t,this.categoryTitle=i.name,this.categoryErList=e.child?e.child:[],this.tabClick=0,this.tabLeft=0,this.sid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},longClick:function(t,e){this.productList.length>3&&(this.tabLeft=(t-1)*(this.isWidth+6)),this.tabClick=t,this.iSlong=!0,this.sid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},navSwitch:function(t,e){this.productList.length>3&&(this.tabLeft=(t-1)*(this.isWidth+6)),this.tabClick=t,this.iSlong=!0,this.sid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()}}};e.default=p}).call(this,i("543d")["default"])},"1df7":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i("b07f"),a=(n(i("9db5")),n(i("37f7")));function n(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{showSkeleton:!0,isNodes:0,navlist:[],productList:[{name:"Âç†‰ΩçÂç†‰Ωç",child:[{extra:""},{extra:""}]},{name:"Âç†‰ΩçÂç†‰Ωç",child:[{extra:""},{extra:""}]},{name:"Âç†‰ΩçÂç†‰Ωç",child:[{extra:""},{extra:""}]},{name:"Âç†‰ΩçÂç†‰Ωç"}],navActive:0,number:"",height:0,hightArr:[],toView:"",tabbarH:0,theme:"theme1"}},created:function(){var e=this,i=this;t.getStorage({key:"theme",success:function(t){i.theme=t.data}}),setTimeout((function(){e.isNodes++}),500),this.getAllCategory()},methods:{infoScroll:function(){var e=this,i=e.productList.length,r=e.productList[i-1]&&e.productList[i-1].child?e.productList[i-1].child:[];this.number=r?r.length:0,t.getSystemInfo({success:function(t){e.height=t.windowHeight*(750/t.windowWidth)-98}});for(var a=[],n=0;n<i;n++){var s=t.createSelectorQuery().in(this),c="#b"+n;s.select(c).boundingClientRect(),s.exec((function(t){var i=t[0].top;a.push(i),e.hightArr=a}))}},tap:function(t,e){this.toView=e,this.navActive=t},getAllCategory:function(){var t=this,e=this;(0,r.getCategoryList)().then((function(i){e.productList=i.data,setTimeout((function(){e.infoScroll()}),500),setTimeout((function(){t.showSkeleton=!1}),1e3)}))},scroll:function(t){for(var e=t.detail.scrollTop,i=this.hightArr,r=0;r<i.length;r++)e>=0&&e<i[1]-i[0]?this.navActive=0:e>=i[r]-i[0]&&e<i[r+1]-i[0]?this.navActive=r:e>=i[i.length-1]-i[0]&&(this.navActive=i.length-1)},searchSubmitValue:function(e){if(!(this.$util.trim(e.detail.value).length>0))return this.$util.Tips({title:"ËØ∑Â°´ÂÜôË¶ÅÊêúÁ¥¢ÁöÑ‰∫ßÂìÅ‰ø°ÊÅØ"});t.navigateTo({animationType:a.default.type,animationDuration:a.default.duration,url:"/pages/goods_list/index?searchValue="+e.detail.value})}}};e.default=s}).call(this,i("543d")["default"])},"1f6f":function(t,e,i){"use strict";i.r(e);var r=i("5127"),a=i("1242");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("c136");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"e651ef5a",null,!1,r["a"],s);e["default"]=o.exports},"208a":function(t,e,i){},2491:function(t,e,i){"use strict";var r=i("5edc"),a=i.n(r);a.a},"283d":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i("b07f"),a=i("52a6"),n=i("26cb"),s=c(i("37f7"));function c(t){return t&&t.__esModule?t:{default:t}}var o=function(){Promise.all([i.e("common/vendor"),i.e("components/recommend/index")]).then(function(){return resolve(i("d826"))}.bind(null,i)).catch(i.oe)},u={computed:(0,n.mapGetters)(["uid"]),components:{recommend:o},data:function(){return{navLists:[],productList:[],scrollLeft:0,active:0,loading:!1,loadend:!1,loadTitle:"Âä†ËΩΩÊõ¥Â§ö",page:1,limit:10,cid:0,hostProduct:[]}},created:function(){this.getAllCategory(),this.getProductList(),this.get_host_product()},methods:{godDetail:function(e){(0,a.goShopDetail)(e,this.uid).then((function(i){t.navigateTo({animationType:s.default.type,animationDuration:s.default.duration,url:"/pages/goods_details/index?id=".concat(e.id)})}))},tabSelect:function(e,i){var r=this;this.active=e;var a=t.createSelectorQuery().in(this);a.select("#id"+e).boundingClientRect((function(t){r.scrollLeft=(e-1)*t.width})).exec(),this.cid=i,this.loadend=!1,this.page=1,this.$set(this,"productList",[]),this.getProductList()},getAllCategory:function(){var t=this;(0,r.getCategoryList)().then((function(e){t.navLists=e.data}))},getProductList:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle="",(0,r.getProductslist)({page:t.page,limit:t.limit,cid:t.cid}).then((function(e){var i=e.data.list,r=i.length<t.limit;t.productList=t.$util.SplitArray(i,t.productList),t.$set(t,"productList",t.productList),t.loading=!1,t.loadend=r,t.loadTitle=r?"üòï‰∫∫ÂÆ∂ÊòØÊúâÂ∫ïÁ∫øÁöÑ~~":"Âä†ËΩΩÊõ¥Â§ö",t.page=t.page+1})).catch((function(e){t.loading=!1,t.loadTitle="Âä†ËΩΩÊõ¥Â§ö"})))},get_host_product:function(){var t=this;(0,r.getProductHot)(1,20).then((function(e){t.$set(t,"hostProduct",e.data.list)}))}}};e.default=u}).call(this,i("543d")["default"])},"2d40":function(t,e,i){"use strict";i.r(e);var r=i("801d"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},3030:function(t,e,i){"use strict";i.r(e);var r=i("89e5"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},3486:function(t,e,i){"use strict";i.r(e);var r=i("986d"),a=i("3030");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("2491");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=o.exports},4194:function(t,e,i){"use strict";var r=i("9ca8"),a=i.n(r);a.a},"4b4f":function(t,e,i){"use strict";var r=i("9a7d"),a=i.n(r);a.a},5127:function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"5ac6":function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"5b79":function(t,e,i){},"5edc":function(t,e,i){},"616a":function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"61db":function(t,e,i){"use strict";i.r(e);var r=i("5ac6"),a=i("99c8");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("4194");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=o.exports},"68ba":function(t,e,i){"use strict";i.r(e);var r=i("d244"),a=i("2d40");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("790a");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=o.exports},"755a":function(t,e,i){"use strict";i.r(e);var r=i("283d"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},"790a":function(t,e,i){"use strict";var r=i("ccb2"),a=i.n(r);a.a},"7b9a":function(t,e,i){"use strict";var r=i("e677"),a=i.n(r);a.a},"801d":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i("b07f"),a=i("fa41"),n=d(i("61db")),s=i("26cb"),c=i("52a6"),o=i("8a48"),u=d(i("37f7"));function d(t){return t&&t.__esModule?t:{default:t}}var l=function(){i.e("components/productWindow/index").then(function(){return resolve(i("3076"))}.bind(null,i)).catch(i.oe)},h=function(){i.e("components/cartList/index").then(function(){return resolve(i("070d"))}.bind(null,i)).catch(i.oe)},f=function(){i.e("components/home/index").then(function(){return resolve(i("40e3"))}.bind(null,i)).catch(i.oe)},p={computed:(0,s.mapGetters)(["isLogin","uid"]),components:{productWindow:l,goodList:n.default,cartList:h,home:f},props:{showSlide:{type:Boolean,default:!0}},data:function(){return{productList:[],navActive:0,categoryTitle:"",categoryErList:[],tabLeft:0,isWidth:0,tabClick:0,iSlong:!0,tempArr:[],loading:!1,loadend:!1,loadTitle:"Âä†ËΩΩÊõ¥Â§ö",page:1,limit:10,cid:0,sid:0,isAuto:!1,isShowAuth:!1,attr:{cartAttr:!1,productAttr:[],productSelect:{}},productValue:[],attrValue:"",storeName:"",id:0,cartData:{cartList:[],iScart:!1},cartCount:0,totalPrice:0,lengthCart:0}},created:function(){this.isLogin&&(this.getCartNum(),this.getCartLists(1)),this.getAllCategory();var e=this;e.lengthCart=e.cartData.cartList,t.getSystemInfo({success:function(t){e.isWidth=t.windowWidth/5}})},methods:{subOrder:function(){var t=this,e=t.cartData.cartList;if(!e.length)return t.$util.Tips({title:"ËØ∑ÈÄâÊã©‰∫ßÂìÅ"});var i=e.map((function(t){return{shoppingCartId:Number(t.id)}}));this.$Order.getPreOrder("shoppingCart",i),t.cartData.iScart=!1},getTotalPrice:function(){var t=this,e=t.cartData.cartList,i=0;e.forEach((function(e){e.attrStatus&&(i=t.$util.$h.Add(i,t.$util.$h.Mul(e.cartNum,e.vipPrice?e.vipPrice:e.price)))})),t.$set(t,"totalPrice",i)},ChangeSubDel:function(t){var e=this,i=e.cartData.cartList,r=[];i.forEach((function(t){r.push(t.id)})),(0,a.cartDel)(r.join(",")).then((function(t){e.$set(e.cartData,"cartList",[]),e.cartData.iScart=!1,e.totalPrice=0,e.page=1,e.loadend=!1,e.tempArr=[],e.productslist(),e.getCartNum()}))},ChangeOneDel:function(t,e){var i=this,r=i.cartData.cartList;(0,a.cartDel)(t.toString()).then((function(t){r.splice(e,1),r.length||(i.cartData.iScart=!1,i.page=1,i.loadend=!1,i.tempArr=[],i.productslist()),i.getCartNum()}))},getCartLists:function(t){var e=this,i={page:1,limit:e.cartCount,isValid:!0};(0,a.getCartList)(i).then((function(i){e.$set(e.cartData,"cartList",i.data.list),i.data.list.length?e.$set(e.cartData,"iScart",!t&&!e.cartData.iScart):e.$set(e.cartData,"iScart",!1),e.getTotalPrice()}))},closeList:function(t){this.$set(this.cartData,"iScart",t),this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},getCartNum:function(){var t=this;(0,a.getCartCounts)(!0,"sum").then((function(e){t.$set(t,"cartCount",e.data.count)}))},onMyEvent:function(){this.$set(this.attr,"cartAttr",!1)},DefaultSelect:function(){var t=this.attr.productAttr,e=[];for(var i in this.productValue)if(this.productValue[i].stock>0){e=this.attr.productAttr.length?i.split(","):[];break}for(var r=0;r<t.length;r++)this.$set(t[r],"index",e[r]);var a=this.productValue[e.join(",")];a&&t.length?(this.$set(this.attr.productSelect,"storeName",this.storeName),this.$set(this.attr.productSelect,"image",a.image),this.$set(this.attr.productSelect,"price",a.price),this.$set(this.attr.productSelect,"stock",a.stock),this.$set(this.attr.productSelect,"unique",a.id),this.$set(this.attr.productSelect,"vipPrice",a.vipPrice),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"attrValue",e.join(","))):!a&&t.length?(this.$set(this.attr.productSelect,"storeName",this.storeName),this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",0),this.$set(this.attr.productSelect,"unique",""),this.$set(this.attr.productSelect,"cart_num",0),this.$set(this,"attrValue","")):a||t.length||(this.$set(this.attr.productSelect,"storeName",this.storeName),this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",this.storeInfo.stock),this.$set(this.attr.productSelect,"unique",this.storeInfo.unique||""),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"attrValue",""))},ChangeAttr:function(t){var e=this.productValue[t];e?(this.$set(this.attr.productSelect,"image",e.image),this.$set(this.attr.productSelect,"price",e.price),this.$set(this.attr.productSelect,"stock",e.stock),this.$set(this.attr.productSelect,"unique",e.id),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vipPrice",e.vipPrice),this.$set(this,"attrValue",t)):(this.$set(this.attr.productSelect,"image",this.productInfo.image),this.$set(this.attr.productSelect,"price",this.productInfo.price),this.$set(this.attr.productSelect,"stock",0),this.$set(this.attr.productSelect,"unique",this.productInfo.id),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vipPrice",this.productInfo.vipPrice),this.$set(this,"attrValue",""))},attrVal:function(t){this.$set(this.attr.productAttr[t.indexw],"index",this.attr.productAttr[t.indexw].attrValues[t.indexn])},iptCartNum:function(t){this.$set(this.attr.productSelect,"cart_num",t)},onLoadFun:function(){},productslist:function(){var t=this;t.loadend||t.loading||(t.loading=!0,t.loadTitle="",(0,r.getProductslist)({page:t.page,limit:t.limit,type:1,cid:t.sid}).then((function(e){var i=e.data.list,r=i.length<t.limit;t.tempArr=t.$util.SplitArray(i,t.tempArr),t.$set(t,"tempArr",t.tempArr),t.loading=!1,t.loadend=r,t.loadTitle=r?"üòï‰∫∫ÂÆ∂ÊòØÊúâÂ∫ïÁ∫øÁöÑ~~":"Âä†ËΩΩÊõ¥Â§ö",t.page=t.page+1})).catch((function(e){t.loading=!1,t.loadTitle="Âä†ËΩΩÊõ¥Â§ö"})))},ChangeCartNumDuo:function(t){var e=this.productValue[this.attrValue];if(void 0!==e||this.attr.productAttr.length||(e=this.attr.productSelect),void 0!==e){var i=e.stock||0,r=this.attr.productSelect;t?(r.cart_num++,r.cart_num>i&&(this.$set(this.attr.productSelect,"cart_num",i),this.$set(this,"cart_num",i))):(r.cart_num--,r.cart_num<1&&(this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"cart_num",1)))}},ChangeCartList:function(t,e){var i=this.cartData.cartList,r=i[e],a=i[e].stock;this.ChangeCartNum(t,r,a,0,r.productId,e,1),i.length||(this.cartData.iScart=!1,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist())},ChangeCartNum:function(t,e){var i=this;t?e.cartNum>=e.stock?e.cartNum=e.stock:(e.cartNum++,(0,a.changeCartNum)(e.id,e.cartNum).then((function(t){i.getCartNum(!0),i.getTotalPrice()}))):(e.cartNum--,(0,a.changeCartNum)(e.id,e.cartNum).then((function(t){i.getCartNum(!0),i.getTotalPrice()})),0==e.cartNum&&(0,a.cartDel)(e.id).then((function(t){i.getCartLists(1),i.getTotalPrice(),i.productslist(),i.getCartNum()})))},goCatNum:function(){this.goCat(1)},goCat:function(t){var e=this,i=e.productValue[this.attrValue];if(e.attrValue?e.attr.cartAttr=!e.isOpen:e.isOpen?e.attr.cartAttr=!0:e.attr.cartAttr=!e.attr.cartAttr,!0===e.attr.cartAttr&&!1===e.isOpen)return e.isOpen=!0;if(e.attr.productAttr.length&&0===i.stock&&!0===e.isOpen)return e.$util.Tips({title:"‰∫ßÂìÅÂ∫ìÂ≠ò‰∏çË∂≥ÔºåËØ∑ÈÄâÊã©ÂÖ∂ÂÆÉ"});if(1===t){var a={productId:parseFloat(e.id),cartNum:parseFloat(e.attr.productSelect.cart_num),isNew:!1,productAttrUnique:void 0!==e.attr.productSelect?e.attr.productSelect.unique:e.productInfo.id};(0,r.postCartAdd)(a).then((function(t){e.isOpen=!1,e.attr.cartAttr=!1,e.$util.Tips({title:"Ê∑ªÂä†Ë¥≠Áâ©ËΩ¶ÊàêÂäü",success:function(){setTimeout((function(){e.getCartNum(!0),e.getCartLists(1)}),100)}})})).catch((function(t){return e.isOpen=!1,e.$util.Tips({title:t})}))}else this.getPreOrder()},goCartDuo:function(e){this.isLogin?(t.showLoading({title:"Âä†ËΩΩ‰∏≠"}),this.storeName=e.storeName,this.getAttrs(e.id,e.storeName),this.$set(this,"id",e.id)):this.getIsLogin()},getIsLogin:function(){(0,o.toLogin)()},getAttrs:function(e){var i=this,a=this;(0,r.getAttr)(e).then((function(e){t.hideLoading(),a.$set(a.attr,"productAttr",e.data.productAttr),a.$set(a,"productValue",e.data.productValue);var r=a.attr.productAttr.map((function(t){return{attrName:t.attrName,attrValues:t.attrValues.split(","),id:t.id,isDel:t.isDel,productId:t.productId,type:t.type}}));i.$set(a.attr,"productAttr",r),i.$set(a.attr,"cartAttr",!0),a.DefaultSelect()}))},goDetail:function(e){this.isLogin?(0,c.goShopDetail)(e,this.uid).then((function(i){t.navigateTo({animationType:u.default.type,animationDuration:u.default.duration,url:"/pages/goods_details/index?id=".concat(e.id)})})):(0,o.toLogin)()},openTap:function(){this.iSlong=!1},closeTap:function(){this.iSlong=!0},getAllCategory:function(){var t=this;(0,r.getCategoryList)().then((function(e){e.data.forEach((function(t){t.child&&t.child.unshift({id:t.id,name:"ÂÖ®ÈÉ®"})}));var i=e.data;t.categoryTitle=i[0].name,t.sid=i[0].id,t.productList=i,t.categoryErList=e.data[0].child?e.data[0].child:[],t.page=1,t.loadend=!1,t.tempArr=[],t.productslist()}))},tapNav:function(t,e){var i=this.productList[t];this.navActive=t,this.categoryTitle=i.name,this.categoryErList=e.child?e.child:[],this.tabClick=0,this.tabLeft=0,this.sid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},navSwitch:function(t,e){this.productList.length>3&&(this.tabLeft=(t-1)*(this.isWidth+6)),this.tabClick=t,this.iSlong=!0,this.sid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},longClick:function(t,e){this.productList.length>3&&(this.tabLeft=(t-1)*(this.isWidth+6)),this.tabClick=t,this.iSlong=!0,this.sid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()}}};e.default=p}).call(this,i("543d")["default"])},"89e5":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(i("1f6f")),a=u(i("68ba")),n=u(i("c074")),s=u(i("068a")),c=i("1bab"),o=i("26cb");function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){i.e("components/home/index").then(function(){return resolve(i("40e3"))}.bind(null,i)).catch(i.oe)},l=getApp(),h={data:function(){return{currentPage:"one",theme:l.globalData.theme,showSlide:!0,winHeight:"",configApi:{}}},computed:(0,o.mapGetters)(["isLogin","uid"]),onLoad:function(){var e=this,i=e.$Cache.getItem("categoryConfig");switch(e.showSlide="true"==i.isShowCategory,i.categoryConfig){case"1":e.$set(e,"currentPage","one"),t.showTabBar();break;case"2":e.$set(e,"currentPage","two"),t.showTabBar();break;case"3":e.$set(e,"currentPage","three"),t.hideTabBar();break;case"4":e.$set(e,"currentPage","four"),t.hideTabBar();break}t.getSystemInfo({success:function(t){e.winHeight=t.windowHeight}})},onShow:function(){var e=this;switch(this.currentPage){case"one":t.showTabBar();break;case"two":t.showTabBar();break;case"three":t.hideTabBar(),setTimeout((function(){e.isLogin&&(e.$refs.classThree.getCartNum(),e.$refs.classThree.getCartLists(1))}),500);break;case"four":t.hideTabBar(),setTimeout((function(){e.isLogin&&(e.$refs.classFour.getCartNum(),e.$refs.classFour.getCartLists(1))}),500);break}},components:{cate:r.default,optimization:a.default,contracted:n.default,fresh:s.default,home:d},methods:{shareApi:function(){var t=this;(0,c.getShare)().then((function(e){t.$set(t,"configApi",e.data)}))},setOpenShare:function(t){var e=this;if(e.$wechat.isWeixin()){var i={desc:t.synopsis,title:t.title,link:location.href,imgUrl:t.img};e.$wechat.wechatEvevt(["updateAppMessageShareData","updateTimelineShareData"],i)}}},onReachBottom:function(){"two"==this.currentPage&&this.$refs.classTwo.getProductList(),"three"==this.currentPage&&this.$refs.classThree.productslist(),"four"==this.currentPage&&this.$refs.classFour.productslist()}};e.default=h}).call(this,i("543d")["default"])},9241:function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},9589:function(t,e,i){"use strict";i.r(e);var r=i("0f36"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},"986d":function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"99c8":function(t,e,i){"use strict";i.r(e);var r=i("dddf"),a=i.n(r);for(var n in r)"default"!==n&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},"9a7d":function(t,e,i){},"9ca8":function(t,e,i){},b506:function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},c074:function(t,e,i){"use strict";i.r(e);var r=i("9241"),a=i("755a");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("4b4f");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,"195eb643",null,!1,r["a"],s);e["default"]=o.exports},c136:function(t,e,i){"use strict";var r=i("208a"),a=i.n(r);a.a},ccb2:function(t,e,i){},d244:function(t,e,i){"use strict";var r;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},n=[]},dddf:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={name:"d_goodList",props:{dataConfig:{type:Object,default:function(){}},tempArr:{type:Array,default:[]},isLogin:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},mounted:function(){},methods:{goDetail:function(t){this.$emit("detail",t)},goCartDuo:function(t){this.$emit("gocartduo",t)}}};e.default=r},e677:function(t,e,i){},f326:function(t,e,i){"use strict";var r=i("5b79"),a=i.n(r);a.a},fba4:function(t,e,i){"use strict";i.r(e);var r=i("b506"),a=i("9589");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("7b9a");var s,c=i("f0c5"),o=Object(c["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);e["default"]=o.exports}},[["0b74","common/runtime","common/vendor"]]]);